--- cups-1.1.18/config-scripts/cups-network.m4.orig	Tue Dec 17 18:56:39 2002
+++ cups-1.1.18/config-scripts/cups-network.m4	Thu May  8 15:21:43 2003
@@ -25,8 +25,8 @@
 NETLIBS=""
 
 if test "$uname" != "IRIX"; then
-	AC_CHECK_LIB(socket,socket,NETLIBS="-lsocket")
-	AC_CHECK_LIB(nsl,gethostbyaddr,NETLIBS="$NETLIBS -lnsl")
+	AC_CHECK_FUNC(socket,,[AC_CHECK_LIB(socket,socket,NETLIBS="-lsocket")])
+	AC_CHECK_FUNC(gethostbyaddr,,[AC_CHECK_LIB(nsl,gethostbyaddr,NETLIBS="$NETLIBS -lnsl")])
 fi
 
 AC_CHECK_FUNCS(rresvport getifaddrs)
